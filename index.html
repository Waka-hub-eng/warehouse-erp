<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ·å¤–ä»“ERPç®¡ç†ç³»ç»Ÿ - å¢å¼ºç‰ˆ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¢</text></svg>">
    
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root {
            /* æµ…è‰²ä¸»é¢˜ */
            --primary-color: #409EFF;
            --success-color: #67C23A;
            --warning-color: #E6A23C;
            --danger-color: #F56C6C;
            --info-color: #909399;
            
            --bg-color: #f5f5f5;
            --card-bg: #ffffff;
            --text-color: #303133;
            --text-secondary: #606266;
            --border-color: #DCDFE6;
            --sidebar-bg: #304156;
            --sidebar-text: #bfcbd9;
            
            /* é—´è· */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            
            /* åœ†è§’ */
            --border-radius: 6px;
            --border-radius-lg: 12px;
            
            /* é˜´å½± */
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.2);
        }
        
        [data-theme="dark"] {
            --bg-color: #1a1a1a;
            --card-bg: #2d2d2d;
            --text-color: #ffffff;
            --text-secondary: #cccccc;
            --border-color: #404040;
            --sidebar-bg: #1f1f1f;
            --sidebar-text: #cccccc;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: all 0.3s ease;
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-color);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }
        
        /* ç™»å½•é¡µé¢æ ·å¼ */
        .login-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: var(--spacing-lg);
        }
        
        .login-box {
            background: var(--card-bg);
            padding: var(--spacing-xl);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 400px;
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .login-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }
        
        .login-header h1 {
            color: var(--primary-color);
            margin-bottom: var(--spacing-sm);
            font-size: 28px;
            font-weight: 600;
        }
        
        .login-header p {
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .form-group {
            margin-bottom: var(--spacing-lg);
        }
        
        .form-group label {
            display: block;
            margin-bottom: var(--spacing-sm);
            color: var(--text-color);
            font-weight: 500;
            font-size: 14px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px var(--spacing-md);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: all 0.3s ease;
            background: var(--card-bg);
            color: var(--text-color);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(64, 158, 255, 0.1);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px var(--spacing-lg);
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            gap: var(--spacing-sm);
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: #337ecc;
            transform: translateY(-1px);
        }
        
        .btn-success {
            background: var(--success-color);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning-color);
            color: white;
        }
        
        .btn-danger {
            background: var(--danger-color);
            color: white;
        }
        
        .btn-secondary {
            background: var(--info-color);
            color: white;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 14px;
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-full {
            width: 100%;
        }
        
        /* ä¸»åº”ç”¨å¸ƒå±€ */
        .app-container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        
        .sidebar {
            width: 260px;
            background: var(--sidebar-bg);
            color: var(--sidebar-text);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            box-shadow: var(--shadow-md);
        }
        
        .sidebar.collapsed {
            width: 70px;
        }
        
        .logo {
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            gap: var(--spacing-sm);
        }
        
        .logo-text {
            transition: opacity 0.3s ease;
        }
        
        .sidebar.collapsed .logo-text {
            opacity: 0;
        }
        
        .nav-menu {
            flex: 1;
            padding: var(--spacing-md) 0;
            overflow-y: auto;
        }
        
        .nav-item {
            margin-bottom: var(--spacing-xs);
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: var(--spacing-md) var(--spacing-lg);
            color: var(--sidebar-text);
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            gap: var(--spacing-md);
            position: relative;
        }
        
        .nav-link:hover {
            background: rgba(255,255,255,0.1);
            color: white;
        }
        
        .nav-link.active {
            background: var(--primary-color);
            color: white;
        }
        
        .nav-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: white;
        }
        
        .nav-icon {
            font-size: 20px;
            width: 24px;
            text-align: center;
            flex-shrink: 0;
        }
        
        .nav-text {
            transition: opacity 0.3s ease;
            white-space: nowrap;
        }
        
        .sidebar.collapsed .nav-text {
            opacity: 0;
        }
        
        /* ä¸»å†…å®¹åŒº */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .header {
            height: 70px;
            background: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--spacing-lg);
            box-shadow: var(--shadow-sm);
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }
        
        .toggle-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: var(--spacing-sm);
            border-radius: var(--border-radius);
            color: var(--text-color);
            transition: all 0.3s ease;
        }
        
        .toggle-btn:hover {
            background: var(--bg-color);
        }
        
        .page-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-color);
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }
        
        .theme-toggle {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: var(--spacing-sm);
            border-radius: var(--border-radius);
            color: var(--text-color);
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            background: var(--bg-color);
        }
        
        .user-menu {
            position: relative;
            cursor: pointer;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--border-radius);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        .user-menu:hover {
            background: var(--bg-color);
        }
        
        /* å†…å®¹åŒºåŸŸ */
        .content {
            flex: 1;
            padding: var(--spacing-lg);
            overflow-y: auto;
            background: var(--bg-color);
        }
        
        /* å¡ç‰‡ç»„ä»¶ */
        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-sm);
            margin-bottom: var(--spacing-lg);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: var(--shadow-md);
        }
        
        .card-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .card-body {
            padding: var(--spacing-lg);
        }
        
        /* ç»Ÿè®¡å¡ç‰‡ç½‘æ ¼ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }
        
        .stat-card {
            background: var(--card-bg);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            flex-shrink: 0;
        }
        
        .stat-info {
            flex: 1;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: var(--spacing-xs);
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .stat-change {
            font-size: 12px;
            margin-top: var(--spacing-xs);
        }
        
        .stat-change.positive {
            color: var(--success-color);
        }
        
        .stat-change.negative {
            color: var(--danger-color);
        }
        
        /* è¡¨æ ¼æ ·å¼ */
        .table-container {
            overflow-x: auto;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            background: var(--card-bg);
        }
        
        .table th,
        .table td {
            padding: var(--spacing-md);
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .table th {
            background: var(--bg-color);
            font-weight: 600;
            color: var(--text-color);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .table tr:hover {
            background: var(--bg-color);
        }
        
        .table tr:last-child td {
            border-bottom: none;
        }
        
        /* å·¥å…·æ  */
        .toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-lg);
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }
        
        .toolbar-left {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            flex-wrap: wrap;
        }
        
        .toolbar-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }
        
        /* æœç´¢æ¡† */
        .search-box {
            position: relative;
            min-width: 250px;
        }
        
        .search-input {
            width: 100%;
            padding: 10px var(--spacing-md) 10px 40px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 14px;
            background: var(--card-bg);
            color: var(--text-color);
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }
        
        /* ç­›é€‰å™¨ */
        .filter-group {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        .filter-select {
            padding: 8px var(--spacing-md);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            background: var(--card-bg);
            color: var(--text-color);
            font-size: 14px;
        }
        
        /* æ¨¡æ€æ¡† */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active .modal {
            transform: scale(1);
        }
        
        .modal-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-secondary);
            padding: var(--spacing-xs);
        }
        
        .modal-body {
            padding: var(--spacing-lg);
        }
        
        .modal-footer {
            padding: var(--spacing-lg);
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-md);
        }
        
        /* è¡¨å•æ ·å¼ */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }
        
        .form-group {
            margin-bottom: var(--spacing-md);
        }
        
        .form-label {
            display: block;
            margin-bottom: var(--spacing-sm);
            font-weight: 500;
            color: var(--text-color);
        }
        
        .form-control {
            width: 100%;
            padding: 10px var(--spacing-md);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 14px;
            background: var(--card-bg);
            color: var(--text-color);
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        /* é€šçŸ¥ç³»ç»Ÿ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--border-radius);
            color: white;
            font-size: 14px;
            z-index: 9999;
            max-width: 350px;
            box-shadow: var(--shadow-md);
            transform: translateX(100%);
            transition: all 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: var(--success-color);
        }
        
        .notification.error {
            background: var(--danger-color);
        }
        
        .notification.warning {
            background: var(--warning-color);
        }
        
        .notification.info {
            background: var(--primary-color);
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* å¾½ç«  */
        .badge {
            display: inline-block;
            padding: 2px 8px;
            font-size: 12px;
            font-weight: 500;
            border-radius: 12px;
            color: white;
        }
        
        .badge-success {
            background: var(--success-color);
        }
        
        .badge-warning {
            background: var(--warning-color);
        }
        
        .badge-danger {
            background: var(--danger-color);
        }
        
        .badge-info {
            background: var(--info-color);
        }
        
        /* å·¥å…·æç¤º */
        .tooltip {
            position: relative;
            cursor: help;
        }
        
        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--border-radius);
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .tooltip:hover::after {
            opacity: 1;
            visibility: visible;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .sidebar {
                width: 70px;
            }
            
            .sidebar .nav-text,
            .sidebar .logo-text {
                display: none;
            }
            
            .content {
                padding: var(--spacing-md);
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .toolbar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                min-width: auto;
            }
            
            .modal {
                margin: var(--spacing-md);
                max-width: calc(100vw - 32px);
            }
        }
        
        /* éšè—ç±» */
        .hidden {
            display: none !important;
        }
        
        /* é¡µé¢åˆ‡æ¢åŠ¨ç”» */
        .page {
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* å›¾è¡¨å®¹å™¨ */
        .chart-container {
            position: relative;
            height: 300px;
            margin: var(--spacing-md) 0;
        }
        
        /* æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ */
        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            padding: var(--spacing-xl);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(64, 158, 255, 0.05);
        }
        
        .upload-area.dragover {
            border-color: var(--primary-color);
            background: rgba(64, 158, 255, 0.1);
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- ç™»å½•é¡µé¢ -->
        <div id="loginPage" class="login-container">
            <div class="login-box">
                <div class="login-header">
                    <h1>ğŸ¢ æµ·å¤–ä»“ERPç³»ç»Ÿ</h1>
                    <p>ä¸“ä¸šçš„åº“å­˜ç®¡ç†è§£å†³æ–¹æ¡ˆ - å¢å¼ºç‰ˆ</p>
                </div>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="email" class="form-label">é‚®ç®±åœ°å€</label>
                        <input type="email" id="email" class="form-input" value="admin@warehouse.com" required>
                    </div>
                    <div class="form-group">
                        <label for="password" class="form-label">å¯†ç </label>
                        <input type="password" id="password" class="form-input" value="admin123" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full" id="loginBtn">
                        <span id="loginText">ç™»å½•ç³»ç»Ÿ</span>
                        <span id="loginLoading" class="loading hidden"></span>
                    </button>
                </form>
                <div style="margin-top: 20px; padding: 15px; background: rgba(64, 158, 255, 0.1); border-radius: 6px; font-size: 14px;">
                    <strong>ğŸ¯ å¢å¼ºç‰ˆåŠŸèƒ½</strong><br>
                    â€¢ å®Œæ•´çš„äº§å“å’Œåº“å­˜ç®¡ç†<br>
                    â€¢ æ™ºèƒ½æ•°æ®åˆ†æå’Œå›¾è¡¨<br>
                    â€¢ æœ¬åœ°æ•°æ®å­˜å‚¨å’Œå¯¼å…¥å¯¼å‡º<br>
                    â€¢ æ·±è‰²ä¸»é¢˜å’Œå¤šè¯­è¨€æ”¯æŒ
                </div>
            </div>
        </div>
        
        <!-- ä¸»åº”ç”¨ -->
        <div id="mainApp" class="app-container hidden">
            <!-- ä¾§è¾¹æ  -->
            <div class="sidebar" id="sidebar">
                <div class="logo">
                    <span class="nav-icon">ğŸ¢</span>
                    <span class="logo-text">ERPç³»ç»Ÿ</span>
                </div>
                <nav class="nav-menu">
                    <div class="nav-item">
                        <a class="nav-link active" data-page="dashboard">
                            <span class="nav-icon">ğŸ“Š</span>
                            <span class="nav-text">ä»ªè¡¨ç›˜</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a class="nav-link" data-page="products">
                            <span class="nav-icon">ğŸ“¦</span>
                            <span class="nav-text">äº§å“ç®¡ç†</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a class="nav-link" data-page="inventory">
                            <span class="nav-icon">ğŸ“‹</span>
                            <span class="nav-text">åº“å­˜ç®¡ç†</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a class="nav-link" data-page="sales">
                            <span class="nav-icon">ğŸ“ˆ</span>
                            <span class="nav-text">é”€é‡åˆ†æ</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a class="nav-link" data-page="suppliers">
                            <span class="nav-icon">ğŸ¢</span>
                            <span class="nav-text">ä¾›åº”å•†</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a class="nav-link" data-page="orders">
                            <span class="nav-icon">ğŸ“„</span>
                            <span class="nav-text">é‡‡è´­è®¢å•</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a class="nav-link" data-page="settings">
                            <span class="nav-icon">âš™ï¸</span>
                            <span class="nav-text">ç³»ç»Ÿè®¾ç½®</span>
                        </a>
                    </div>
                </nav>
            </div>
            
            <!-- ä¸»å†…å®¹åŒº -->
            <div class="main-content">
                <!-- å¤´éƒ¨ -->
                <header class="header">
                    <div class="header-left">
                        <button class="toggle-btn" id="toggleBtn">â˜°</button>
                        <h1 class="page-title" id="pageTitle">ä»ªè¡¨ç›˜</h1>
                    </div>
                    <div class="header-right">
                        <button class="theme-toggle" id="themeToggle" data-tooltip="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
                        <div class="user-menu" onclick="showUserMenu()">
                            <span id="userName">admin@warehouse.com</span>
                            <span>ğŸ‘¤</span>
                        </div>
                    </div>
                </header>
                
                <!-- å†…å®¹åŒºåŸŸ -->
                <main class="content" id="content">
                    <!-- ä»ªè¡¨ç›˜é¡µé¢ -->
                    <div id="dashboardPage" class="page">
                        <!-- ç»Ÿè®¡å¡ç‰‡ -->
                        <div class="stats-grid">
                            <div class="stat-card" onclick="switchPage('products')">
                                <div class="stat-icon" style="background: var(--primary-color);">ğŸ“¦</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="totalProducts">0</div>
                                    <div class="stat-label">æ€»äº§å“æ•°</div>
                                    <div class="stat-change positive">+12 æœ¬æœˆæ–°å¢</div>
                                </div>
                            </div>
                            <div class="stat-card" onclick="switchPage('inventory')">
                                <div class="stat-icon" style="background: var(--success-color);">ğŸ“Š</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="totalInventory">0</div>
                                    <div class="stat-label">æ€»åº“å­˜</div>
                                    <div class="stat-change negative">-5% è¾ƒä¸Šæœˆ</div>
                                </div>
                            </div>
                            <div class="stat-card" onclick="switchPage('sales')">
                                <div class="stat-icon" style="background: var(--warning-color);">ğŸ“ˆ</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="todaySales">0</div>
                                    <div class="stat-label">ä»Šæ—¥é”€é‡</div>
                                    <div class="stat-change positive">+18% è¾ƒæ˜¨æ—¥</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="background: var(--danger-color);">âš ï¸</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="lowStockItems">0</div>
                                    <div class="stat-label">é¢„è­¦å•†å“</div>
                                    <div class="stat-change">éœ€è¦è¡¥è´§</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- å›¾è¡¨åŒºåŸŸ -->
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--spacing-lg); margin-bottom: var(--spacing-lg);">
                            <div class="card">
                                <div class="card-header">
                                    <span>ğŸ“ˆ é”€é‡è¶‹åŠ¿</span>
                                    <select id="salesPeriod" class="filter-select">
                                        <option value="7">æœ€è¿‘7å¤©</option>
                                        <option value="30">æœ€è¿‘30å¤©</option>
                                        <option value="90">æœ€è¿‘90å¤©</option>
                                    </select>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="salesChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">ğŸ”¥ çƒ­é”€äº§å“</div>
                                <div class="card-body">
                                    <div id="topProducts"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- å¿«é€Ÿæ“ä½œ -->
                        <div class="card">
                            <div class="card-header">âš¡ å¿«é€Ÿæ“ä½œ</div>
                            <div class="card-body">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);">
                                    <button class="btn btn-primary" onclick="showAddProductModal()">
                                        â• æ·»åŠ äº§å“
                                    </button>
                                    <button class="btn btn-success" onclick="showImportModal()">
                                        ğŸ“¥ å¯¼å…¥æ•°æ®
                                    </button>
                                    <button class="btn btn-warning" onclick="exportData()">
                                        ğŸ“¤ å¯¼å‡ºæŠ¥è¡¨
                                    </button>
                                    <button class="btn btn-secondary" onclick="showInventoryCheck()">
                                        ğŸ” åº“å­˜ç›˜ç‚¹
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- äº§å“ç®¡ç†é¡µé¢ -->
                    <div id="productsPage" class="page hidden">
                        <div class="toolbar">
                            <div class="toolbar-left">
                                <button class="btn btn-primary" onclick="showAddProductModal()">
                                    â• æ·»åŠ äº§å“
                                </button>
                                <button class="btn btn-success" onclick="showImportModal()">
                                    ğŸ“¥ æ‰¹é‡å¯¼å…¥
                                </button>
                                <button class="btn btn-warning" onclick="exportProducts()">
                                    ğŸ“¤ å¯¼å‡ºäº§å“
                                </button>
                            </div>
                            <div class="toolbar-right">
                                <div class="search-box">
                                    <span class="search-icon">ğŸ”</span>
                                    <input type="text" class="search-input" placeholder="æœç´¢äº§å“..." id="productSearch">
                                </div>
                                <div class="filter-group">
                                    <select class="filter-select" id="categoryFilter">
                                        <option value="">æ‰€æœ‰åˆ†ç±»</option>
                                        <option value="ç”µå­äº§å“">ç”µå­äº§å“</option>
                                        <option value="æœè£…">æœè£…</option>
                                        <option value="å®¶å±…">å®¶å±…</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <span>äº§å“åˆ—è¡¨</span>
                                <span id="productCount" class="badge badge-info">0 ä¸ªäº§å“</span>
                            </div>
                            <div class="card-body" style="padding: 0;">
                                <div class="table-container">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>SKU</th>
                                                <th>äº§å“åç§°</th>
                                                <th>åˆ†ç±»</th>
                                                <th>åº“å­˜</th>
                                                <th>ä»·æ ¼</th>
                                                <th>çŠ¶æ€</th>
                                                <th>æ“ä½œ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="productsTableBody">
                                            <!-- äº§å“æ•°æ®å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åº“å­˜ç®¡ç†é¡µé¢ -->
                    <div id="inventoryPage" class="page hidden">
                        <div class="toolbar">
                            <div class="toolbar-left">
                                <button class="btn btn-primary" onclick="showStockAdjustModal()">
                                    ğŸ“ åº“å­˜è°ƒæ•´
                                </button>
                                <button class="btn btn-warning" onclick="showLowStockReport()">
                                    âš ï¸ åº“å­˜é¢„è­¦
                                </button>
                            </div>
                            <div class="toolbar-right">
                                <div class="search-box">
                                    <span class="search-icon">ğŸ”</span>
                                    <input type="text" class="search-input" placeholder="æœç´¢åº“å­˜..." id="inventorySearch">
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">åº“å­˜æ¦‚è§ˆ</div>
                            <div class="card-body" style="padding: 0;">
                                <div class="table-container">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>äº§å“</th>
                                                <th>å½“å‰åº“å­˜</th>
                                                <th>å®‰å…¨åº“å­˜</th>
                                                <th>åœ¨é€”åº“å­˜</th>
                                                <th>åº“å­˜çŠ¶æ€</th>
                                                <th>æœ€åæ›´æ–°</th>
                                                <th>æ“ä½œ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="inventoryTableBody">
                                            <!-- åº“å­˜æ•°æ®å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é”€é‡åˆ†æé¡µé¢ -->
                    <div id="salesPage" class="page hidden">
                        <div class="card">
                            <div class="card-header">ğŸ“Š é”€é‡åˆ†æ</div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="salesAnalysisChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¾›åº”å•†ç®¡ç†é¡µé¢ -->
                    <div id="suppliersPage" class="page hidden">
                        <div class="toolbar">
                            <div class="toolbar-left">
                                <button class="btn btn-primary" onclick="showAddSupplierModal()">
                                    â• æ·»åŠ ä¾›åº”å•†
                                </button>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">ä¾›åº”å•†åˆ—è¡¨</div>
                            <div class="card-body">
                                <p>ä¾›åº”å•†ç®¡ç†åŠŸèƒ½å¼€å‘ä¸­...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é‡‡è´­è®¢å•é¡µé¢ -->
                    <div id="ordersPage" class="page hidden">
                        <div class="toolbar">
                            <div class="toolbar-left">
                                <button class="btn btn-primary" onclick="showCreateOrderModal()">
                                    â• åˆ›å»ºè®¢å•
                                </button>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">é‡‡è´­è®¢å•</div>
                            <div class="card-body">
                                <p>é‡‡è´­è®¢å•åŠŸèƒ½å¼€å‘ä¸­...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç³»ç»Ÿè®¾ç½®é¡µé¢ -->
                    <div id="settingsPage" class="page hidden">
                        <div class="card">
                            <div class="card-header">âš™ï¸ ç³»ç»Ÿè®¾ç½®</div>
                            <div class="card-body">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">ç³»ç»Ÿè¯­è¨€</label>
                                        <select class="form-control" id="languageSelect">
                                            <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                                            <option value="en-US">English</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">ä¸»é¢˜æ¨¡å¼</label>
                                        <select class="form-control" id="themeSelect">
                                            <option value="light">æµ…è‰²ä¸»é¢˜</option>
                                            <option value="dark">æ·±è‰²ä¸»é¢˜</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <button class="btn btn-primary" onclick="saveSettings()">ä¿å­˜è®¾ç½®</button>
                                    <button class="btn btn-warning" onclick="exportAllData()">å¯¼å‡ºæ‰€æœ‰æ•°æ®</button>
                                    <button class="btn btn-danger" onclick="clearAllData()">æ¸…ç©ºæ‰€æœ‰æ•°æ®</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>
    
    <!-- æ·»åŠ äº§å“æ¨¡æ€æ¡† -->
    <div id="addProductModal" class="modal-overlay">
        <div class="modal" style="width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">æ·»åŠ äº§å“</h3>
                <button class="modal-close" onclick="closeModal('addProductModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addProductForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">SKU *</label>
                            <input type="text" class="form-control" name="sku" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">äº§å“åç§° *</label>
                            <input type="text" class="form-control" name="name" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">åˆ†ç±»</label>
                            <select class="form-control" name="category">
                                <option value="ç”µå­äº§å“">ç”µå­äº§å“</option>
                                <option value="æœè£…">æœè£…</option>
                                <option value="å®¶å±…">å®¶å±…</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ä»·æ ¼</label>
                            <input type="number" class="form-control" name="price" step="0.01">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">åˆå§‹åº“å­˜</label>
                            <input type="number" class="form-control" name="stock" value="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å®‰å…¨åº“å­˜</label>
                            <input type="number" class="form-control" name="safeStock" value="10">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">æè¿°</label>
                        <textarea class="form-control" name="description" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addProductModal')">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="addProduct()">æ·»åŠ äº§å“</button>
            </div>
        </div>
    </div>
    
    <!-- æ•°æ®å¯¼å…¥æ¨¡æ€æ¡† -->
    <div id="importModal" class="modal-overlay">
        <div class="modal" style="width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title">æ•°æ®å¯¼å…¥</h3>
                <button class="modal-close" onclick="closeModal('importModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="upload-area" id="uploadArea">
                    <div style="font-size: 48px; margin-bottom: 16px;">ğŸ“</div>
                    <p>æ‹–æ‹½CSVæ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</p>
                    <input type="file" id="fileInput" accept=".csv" style="display: none;">
                    <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                        é€‰æ‹©æ–‡ä»¶
                    </button>
                </div>
                <div id="importPreview" class="hidden" style="margin-top: 20px;">
                    <h4>æ•°æ®é¢„è§ˆ</h4>
                    <div id="previewTable"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('importModal')">å–æ¶ˆ</button>
                <button class="btn btn-primary" id="confirmImport" onclick="confirmImport()" disabled>ç¡®è®¤å¯¼å…¥</button>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentUser = null;
        let currentPage = 'dashboard';
        let sidebarCollapsed = false;
        let currentTheme = 'light';
        let currentLanguage = 'zh-CN';
        
        // æ•°æ®å­˜å‚¨
        let products = [];
        let inventory = [];
        let sales = [];
        let suppliers = [];
        let orders = [];
        
        // é¡µé¢æ ‡é¢˜æ˜ å°„
        const pageTitles = {
            dashboard: 'ä»ªè¡¨ç›˜',
            products: 'äº§å“ç®¡ç†',
            inventory: 'åº“å­˜ç®¡ç†',
            sales: 'é”€é‡åˆ†æ',
            suppliers: 'ä¾›åº”å•†ç®¡ç†',
            orders: 'é‡‡è´­è®¢å•',
            settings: 'ç³»ç»Ÿè®¾ç½®'
        };
        
        // å›¾è¡¨å®ä¾‹
        let salesChart = null;
        let salesAnalysisChart = null;
        
        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
        
        function initializeApp() {
            // åŠ è½½ä¿å­˜çš„æ•°æ®
            loadData();
            
            // åŠ è½½è®¾ç½®
            loadSettings();
            
            // ç»‘å®šäº‹ä»¶
            bindEvents();
            
            // åˆå§‹åŒ–å›¾è¡¨
            initCharts();
            
            console.log('ğŸš€ æµ·å¤–ä»“ERPç³»ç»Ÿå¢å¼ºç‰ˆåˆå§‹åŒ–å®Œæˆ');
        }
        
        function bindEvents() {
            // ç™»å½•è¡¨å•
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            
            // ä¾§è¾¹æ åˆ‡æ¢
            document.getElementById('toggleBtn').addEventListener('click', toggleSidebar);
            
            // ä¸»é¢˜åˆ‡æ¢
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            
            // å¯¼èˆªèœå•
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    if (page) {
                        switchPage(page);
                    }
                });
            });
            
            // æœç´¢åŠŸèƒ½
            document.getElementById('productSearch')?.addEventListener('input', filterProducts);
            document.getElementById('inventorySearch')?.addEventListener('input', filterInventory);
            
            // ç­›é€‰åŠŸèƒ½
            document.getElementById('categoryFilter')?.addEventListener('change', filterProducts);
            document.getElementById('salesPeriod')?.addEventListener('change', updateSalesChart);
            
            // æ–‡ä»¶ä¸Šä¼ 
            const fileInput = document.getElementById('fileInput');
            const uploadArea = document.getElementById('uploadArea');
            
            if (fileInput && uploadArea) {
                fileInput.addEventListener('change', handleFileSelect);
                
                uploadArea.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('dragover');
                });
                
                uploadArea.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    this.classList.remove('dragover');
                });
                
                uploadArea.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('dragover');
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        handleFile(files[0]);
                    }
                });
            }
        }
        
        // ç™»å½•å¤„ç†
        async function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const loginBtn = document.getElementById('loginBtn');
            const loginText = document.getElementById('loginText');
            const loginLoading = document.getElementById('loginLoading');
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            loginBtn.disabled = true;
            loginText.classList.add('hidden');
            loginLoading.classList.remove('hidden');
            
            // æ¨¡æ‹Ÿç™»å½•å»¶è¿Ÿ
            setTimeout(() => {
                currentUser = { email: email, name: email.split('@')[0] };
                document.getElementById('userName').textContent = email;
                
                // éšè—ç™»å½•é¡µé¢ï¼Œæ˜¾ç¤ºä¸»åº”ç”¨
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
                
                // é‡ç½®ç™»å½•æŒ‰é’®çŠ¶æ€
                loginBtn.disabled = false;
                loginText.classList.remove('hidden');
                loginLoading.classList.add('hidden');
                
                // åˆå§‹åŒ–æ•°æ®
                initializeData();
                
                showNotification('ç™»å½•æˆåŠŸï¼æ¬¢è¿ä½¿ç”¨æµ·å¤–ä»“ERPç³»ç»Ÿå¢å¼ºç‰ˆ', 'success');
            }, 1500);
        }
        
        // åˆå§‹åŒ–æ¼”ç¤ºæ•°æ®
        function initializeData() {
            if (products.length === 0) {
                products = [
                    {
                        id: 1,
                        sku: 'SKU001',
                        name: 'æ— çº¿è“ç‰™è€³æœº',
                        category: 'ç”µå­äº§å“',
                        price: 299,
                        stock: 150,
                        safeStock: 20,
                        status: 'active',
                        description: 'é«˜å“è´¨æ— çº¿è“ç‰™è€³æœºï¼Œæ”¯æŒé™å™ªåŠŸèƒ½'
                    },
                    {
                        id: 2,
                        sku: 'SKU002',
                        name: 'æ™ºèƒ½æ‰‹è¡¨',
                        category: 'ç”µå­äº§å“',
                        price: 899,
                        stock: 80,
                        safeStock: 15,
                        status: 'active',
                        description: 'å¤šåŠŸèƒ½æ™ºèƒ½æ‰‹è¡¨ï¼Œæ”¯æŒå¥åº·ç›‘æµ‹'
                    },
                    {
                        id: 3,
                        sku: 'SKU003',
                        name: 'ä¾¿æºå……ç”µå®',
                        category: 'ç”µå­äº§å“',
                        price: 129,
                        stock: 200,
                        safeStock: 30,
                        status: 'active',
                        description: 'å¤§å®¹é‡ä¾¿æºå……ç”µå®ï¼Œå¿«å……æŠ€æœ¯'
                    },
                    {
                        id: 4,
                        sku: 'SKU004',
                        name: 'è¿åŠ¨Tæ¤',
                        category: 'æœè£…',
                        price: 89,
                        stock: 5,
                        safeStock: 25,
                        status: 'low_stock',
                        description: 'é€æ°”è¿åŠ¨Tæ¤ï¼Œå¤šç§é¢œè‰²å¯é€‰'
                    },
                    {
                        id: 5,
                        sku: 'SKU005',
                        name: 'å’–å•¡æ¯',
                        category: 'å®¶å±…',
                        price: 45,
                        stock: 120,
                        safeStock: 20,
                        status: 'active',
                        description: 'é™¶ç“·å’–å•¡æ¯ï¼Œä¿æ¸©æ•ˆæœå¥½'
                    }
                ];
                
                // ç”Ÿæˆé”€é‡æ•°æ®
                sales = generateSalesData();
                
                // ä¿å­˜æ•°æ®
                saveData();
            }
            
            // æ›´æ–°ç•Œé¢
            updateDashboard();
            updateProductsTable();
            updateInventoryTable();
            updateSalesChart();
        }
        
        // ç”Ÿæˆé”€é‡æ•°æ®
        function generateSalesData() {
            const salesData = [];
            const today = new Date();
            
            for (let i = 30; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                
                products.forEach(product => {
                    const quantity = Math.floor(Math.random() * 20) + 1;
                    salesData.push({
                        id: Date.now() + Math.random(),
                        date: date.toISOString().split('T')[0],
                        productId: product.id,
                        productName: product.name,
                        quantity: quantity,
                        revenue: quantity * product.price
                    });
                });
            }
            
            return salesData;
        }
        
        // æ›´æ–°ä»ªè¡¨ç›˜
        function updateDashboard() {
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            document.getElementById('totalProducts').textContent = products.length;
            
            const totalInventory = products.reduce((sum, product) => sum + product.stock, 0);
            document.getElementById('totalInventory').textContent = totalInventory.toLocaleString();
            
            const today = new Date().toISOString().split('T')[0];
            const todaySales = sales.filter(sale => sale.date === today)
                .reduce((sum, sale) => sum + sale.quantity, 0);
            document.getElementById('todaySales').textContent = todaySales;
            
            const lowStockItems = products.filter(product => product.stock <= product.safeStock).length;
            document.getElementById('lowStockItems').textContent = lowStockItems;
            
            // æ›´æ–°çƒ­é”€äº§å“
            updateTopProducts();
        }
        
        // æ›´æ–°çƒ­é”€äº§å“
        function updateTopProducts() {
            const productSales = {};
            
            // è®¡ç®—æ¯ä¸ªäº§å“çš„é”€é‡
            sales.forEach(sale => {
                if (!productSales[sale.productId]) {
                    productSales[sale.productId] = {
                        name: sale.productName,
                        quantity: 0
                    };
                }
                productSales[sale.productId].quantity += sale.quantity;
            });
            
            // æ’åºå¹¶å–å‰5å
            const topProducts = Object.values(productSales)
                .sort((a, b) => b.quantity - a.quantity)
                .slice(0, 5);
            
            const container = document.getElementById('topProducts');
            container.innerHTML = topProducts.map((product, index) => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid var(--border-color);">
                    <div>
                        <div style="font-weight: 500;">${index + 1}. ${product.name}</div>
                    </div>
                    <div style="font-weight: bold; color: var(--primary-color);">${product.quantity}</div>
                </div>
            `).join('');
        }
        
        // æ›´æ–°äº§å“è¡¨æ ¼
        function updateProductsTable() {
            const tbody = document.getElementById('productsTableBody');
            const searchTerm = document.getElementById('productSearch')?.value.toLowerCase() || '';
            const categoryFilter = document.getElementById('categoryFilter')?.value || '';
            
            let filteredProducts = products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm) || 
                                    product.sku.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || product.category === categoryFilter;
                return matchesSearch && matchesCategory;
            });
            
            tbody.innerHTML = filteredProducts.map(product => `
                <tr>
                    <td>${product.sku}</td>
                    <td>${product.name}</td>
                    <td>${product.category}</td>
                    <td>${product.stock}</td>
                    <td>Â¥${product.price}</td>
                    <td>
                        <span class="badge ${getStockStatusClass(product)}">
                            ${getStockStatusText(product)}
                        </span>
                    </td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="editProduct(${product.id})">ç¼–è¾‘</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteProduct(${product.id})">åˆ é™¤</button>
                    </td>
                </tr>
            `).join('');
            
            // æ›´æ–°äº§å“è®¡æ•°
            document.getElementById('productCount').textContent = `${filteredProducts.length} ä¸ªäº§å“`;
        }
        
        // æ›´æ–°åº“å­˜è¡¨æ ¼
        function updateInventoryTable() {
            const tbody = document.getElementById('inventoryTableBody');
            
            tbody.innerHTML = products.map(product => `
                <tr>
                    <td>${product.name}</td>
                    <td>${product.stock}</td>
                    <td>${product.safeStock}</td>
                    <td>0</td>
                    <td>
                        <span class="badge ${getStockStatusClass(product)}">
                            ${getStockStatusText(product)}
                        </span>
                    </td>
                    <td>${new Date().toLocaleDateString()}</td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="adjustStock(${product.id})">è°ƒæ•´</button>
                    </td>
                </tr>
            `).join('');
        }
        
        // è·å–åº“å­˜çŠ¶æ€æ ·å¼
        function getStockStatusClass(product) {
            if (product.stock <= product.safeStock) {
                return 'badge-danger';
            } else if (product.stock <= product.safeStock * 2) {
                return 'badge-warning';
            }
            return 'badge-success';
        }
        
        // è·å–åº“å­˜çŠ¶æ€æ–‡æœ¬
        function getStockStatusText(product) {
            if (product.stock <= product.safeStock) {
                return 'åº“å­˜ä¸è¶³';
            } else if (product.stock <= product.safeStock * 2) {
                return 'åº“å­˜åä½';
            }
            return 'åº“å­˜å……è¶³';
        }
        
        // åˆå§‹åŒ–å›¾è¡¨
        function initCharts() {
            // é”€é‡è¶‹åŠ¿å›¾è¡¨
            const salesCtx = document.getElementById('salesChart');
            if (salesCtx) {
                salesChart = new Chart(salesCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'é”€é‡',
                            data: [],
                            borderColor: 'rgb(64, 158, 255)',
                            backgroundColor: 'rgba(64, 158, 255, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
            
            // é”€é‡åˆ†æå›¾è¡¨
            const salesAnalysisCtx = document.getElementById('salesAnalysisChart');
            if (salesAnalysisCtx) {
                salesAnalysisChart = new Chart(salesAnalysisCtx, {
                    type: 'bar',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'é”€é‡',
                            data: [],
                            backgroundColor: 'rgba(64, 158, 255, 0.8)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }
        
        // æ›´æ–°é”€é‡å›¾è¡¨
        function updateSalesChart() {
            if (!salesChart) return;
            
            const period = parseInt(document.getElementById('salesPeriod')?.value || 7);
            const endDate = new Date();
            const startDate = new Date();
            startDate.setDate(endDate.getDate() - period);
            
            // æŒ‰æ—¥æœŸèšåˆé”€é‡æ•°æ®
            const dailySales = {};
            sales.forEach(sale => {
                const saleDate = new Date(sale.date);
                if (saleDate >= startDate && saleDate <= endDate) {
                    const dateStr = sale.date;
                    if (!dailySales[dateStr]) {
                        dailySales[dateStr] = 0;
                    }
                    dailySales[dateStr] += sale.quantity;
                }
            });
            
            // ç”Ÿæˆæ ‡ç­¾å’Œæ•°æ®
            const labels = [];
            const data = [];
            
            for (let i = period - 1; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const dateStr = date.toISOString().split('T')[0];
                const displayDate = date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' });
                
                labels.push(displayDate);
                data.push(dailySales[dateStr] || 0);
            }
            
            salesChart.data.labels = labels;
            salesChart.data.datasets[0].data = data;
            salesChart.update();
        }
        
        // é¡µé¢åˆ‡æ¢
        function switchPage(page) {
            // éšè—æ‰€æœ‰é¡µé¢
            const pages = document.querySelectorAll('.page');
            pages.forEach(p => p.classList.add('hidden'));
            
            // æ˜¾ç¤ºç›®æ ‡é¡µé¢
            const targetPage = document.getElementById(page + 'Page');
            if (targetPage) {
                targetPage.classList.remove('hidden');
            }
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => link.classList.remove('active'));
            
            const activeLink = document.querySelector(`[data-page="${page}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            document.getElementById('pageTitle').textContent = pageTitles[page] || 'æµ·å¤–ä»“ERPç³»ç»Ÿ';
            currentPage = page;
            
            // é¡µé¢ç‰¹å®šçš„åˆå§‹åŒ–
            if (page === 'sales' && salesAnalysisChart) {
                updateSalesAnalysisChart();
            }
        }
        
        // æ›´æ–°é”€é‡åˆ†æå›¾è¡¨
        function updateSalesAnalysisChart() {
            if (!salesAnalysisChart) return;
            
            const productSales = {};
            
            sales.forEach(sale => {
                if (!productSales[sale.productName]) {
                    productSales[sale.productName] = 0;
                }
                productSales[sale.productName] += sale.quantity;
            });
            
            const sortedProducts = Object.entries(productSales)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 10);
            
            salesAnalysisChart.data.labels = sortedProducts.map(([name]) => name);
            salesAnalysisChart.data.datasets[0].data = sortedProducts.map(([,quantity]) => quantity);
            salesAnalysisChart.update();
        }
        
        // ä¾§è¾¹æ åˆ‡æ¢
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebarCollapsed = !sidebarCollapsed;
            
            if (sidebarCollapsed) {
                sidebar.classList.add('collapsed');
            } else {
                sidebar.classList.remove('collapsed');
            }
        }
        
        // ä¸»é¢˜åˆ‡æ¢
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            
            const themeToggle = document.getElementById('themeToggle');
            themeToggle.textContent = currentTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
            
            saveSettings();
        }
        
        // æ˜¾ç¤ºæ¨¡æ€æ¡†
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
            }
        }
        
        // å…³é—­æ¨¡æ€æ¡†
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
            }
        }
        
        // æ˜¾ç¤ºæ·»åŠ äº§å“æ¨¡æ€æ¡†
        function showAddProductModal() {
            showModal('addProductModal');
        }
        
        // æ·»åŠ äº§å“
        function addProduct() {
            const form = document.getElementById('addProductForm');
            const formData = new FormData(form);
            
            const product = {
                id: Date.now(),
                sku: formData.get('sku'),
                name: formData.get('name'),
                category: formData.get('category'),
                price: parseFloat(formData.get('price')) || 0,
                stock: parseInt(formData.get('stock')) || 0,
                safeStock: parseInt(formData.get('safeStock')) || 10,
                status: 'active',
                description: formData.get('description') || ''
            };
            
            // éªŒè¯SKUå”¯ä¸€æ€§
            if (products.some(p => p.sku === product.sku)) {
                showNotification('SKUå·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨ä¸åŒçš„SKU', 'error');
                return;
            }
            
            products.push(product);
            saveData();
            updateProductsTable();
            updateDashboard();
            
            closeModal('addProductModal');
            form.reset();
            
            showNotification('äº§å“æ·»åŠ æˆåŠŸ', 'success');
        }
        
        // ç¼–è¾‘äº§å“
        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (product) {
                showNotification('ç¼–è¾‘åŠŸèƒ½å¼€å‘ä¸­...', 'info');
            }
        }
        
        // åˆ é™¤äº§å“
        function deleteProduct(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªäº§å“å—ï¼Ÿ')) {
                products = products.filter(p => p.id !== id);
                saveData();
                updateProductsTable();
                updateDashboard();
                showNotification('äº§å“åˆ é™¤æˆåŠŸ', 'success');
            }
        }
        
        // ç­›é€‰äº§å“
        function filterProducts() {
            updateProductsTable();
        }
        
        // ç­›é€‰åº“å­˜
        function filterInventory() {
            updateInventoryTable();
        }
        
        // æ˜¾ç¤ºå¯¼å…¥æ¨¡æ€æ¡†
        function showImportModal() {
            showModal('importModal');
        }
        
        // å¤„ç†æ–‡ä»¶é€‰æ‹©
        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        }
        
        // å¤„ç†æ–‡ä»¶
        function handleFile(file) {
            if (file.type !== 'text/csv' && !file.name.endsWith('.csv')) {
                showNotification('è¯·é€‰æ‹©CSVæ–‡ä»¶', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const csv = e.target.result;
                parseCSV(csv);
            };
            reader.readAsText(file);
        }
        
        // è§£æCSV
        function parseCSV(csv) {
            const lines = csv.split('\n');
            const headers = lines[0].split(',').map(h => h.trim());
            
            const data = [];
            for (let i = 1; i < lines.length; i++) {
                if (lines[i].trim()) {
                    const values = lines[i].split(',').map(v => v.trim());
                    const row = {};
                    headers.forEach((header, index) => {
                        row[header] = values[index] || '';
                    });
                    data.push(row);
                }
            }
            
            showImportPreview(data);
        }
        
        // æ˜¾ç¤ºå¯¼å…¥é¢„è§ˆ
        function showImportPreview(data) {
            const preview = document.getElementById('importPreview');
            const table = document.getElementById('previewTable');
            
            if (data.length === 0) {
                showNotification('CSVæ–‡ä»¶ä¸ºç©ºæˆ–æ ¼å¼ä¸æ­£ç¡®', 'error');
                return;
            }
            
            const headers = Object.keys(data[0]);
            const tableHTML = `
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                ${headers.map(h => `<th>${h}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody>
                            ${data.slice(0, 5).map(row => `
                                <tr>
                                    ${headers.map(h => `<td>${row[h]}</td>`).join('')}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                <p style="margin-top: 10px; color: var(--text-secondary);">
                    æ˜¾ç¤ºå‰5è¡Œï¼Œå…±${data.length}è¡Œæ•°æ®
                </p>
            `;
            
            table.innerHTML = tableHTML;
            preview.classList.remove('hidden');
            
            document.getElementById('confirmImport').disabled = false;
            window.importData = data; // ä¸´æ—¶å­˜å‚¨å¯¼å…¥æ•°æ®
        }
        
        // ç¡®è®¤å¯¼å…¥
        function confirmImport() {
            if (!window.importData) return;
            
            let imported = 0;
            let skipped = 0;
            
            window.importData.forEach(row => {
                // æ£€æŸ¥å¿…éœ€å­—æ®µ
                if (!row.sku || !row.name) {
                    skipped++;
                    return;
                }
                
                // æ£€æŸ¥SKUæ˜¯å¦å·²å­˜åœ¨
                if (products.some(p => p.sku === row.sku)) {
                    skipped++;
                    return;
                }
                
                const product = {
                    id: Date.now() + Math.random(),
                    sku: row.sku,
                    name: row.name,
                    category: row.category || 'æœªåˆ†ç±»',
                    price: parseFloat(row.price) || 0,
                    stock: parseInt(row.stock) || 0,
                    safeStock: parseInt(row.safeStock) || 10,
                    status: 'active',
                    description: row.description || ''
                };
                
                products.push(product);
                imported++;
            });
            
            saveData();
            updateProductsTable();
            updateDashboard();
            
            closeModal('importModal');
            
            showNotification(`å¯¼å…¥å®Œæˆï¼š${imported}ä¸ªäº§å“æˆåŠŸï¼Œ${skipped}ä¸ªè·³è¿‡`, 'success');
            
            // æ¸…ç†ä¸´æ—¶æ•°æ®
            delete window.importData;
            document.getElementById('importPreview').classList.add('hidden');
            document.getElementById('confirmImport').disabled = true;
        }
        
        // å¯¼å‡ºäº§å“
        function exportProducts() {
            const csv = convertToCSV(products);
            downloadCSV(csv, 'products.csv');
            showNotification('äº§å“æ•°æ®å¯¼å‡ºæˆåŠŸ', 'success');
        }
        
        // å¯¼å‡ºæ‰€æœ‰æ•°æ®
        function exportAllData() {
            const allData = {
                products,
                sales,
                exportDate: new Date().toISOString()
            };
            
            const json = JSON.stringify(allData, null, 2);
            downloadJSON(json, 'warehouse_erp_data.json');
            showNotification('æ‰€æœ‰æ•°æ®å¯¼å‡ºæˆåŠŸ', 'success');
        }
        
        // è½¬æ¢ä¸ºCSV
        function convertToCSV(data) {
            if (data.length === 0) return '';
            
            const headers = Object.keys(data[0]);
            const csvContent = [
                headers.join(','),
                ...data.map(row => headers.map(header => row[header]).join(','))
            ].join('\n');
            
            return csvContent;
        }
        
        // ä¸‹è½½CSV
        function downloadCSV(csv, filename) {
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            link.click();
        }
        
        // ä¸‹è½½JSON
        function downloadJSON(json, filename) {
            const blob = new Blob([json], { type: 'application/json' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            link.click();
        }
        
        // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveData() {
            localStorage.setItem('warehouse_erp_products', JSON.stringify(products));
            localStorage.setItem('warehouse_erp_sales', JSON.stringify(sales));
            localStorage.setItem('warehouse_erp_suppliers', JSON.stringify(suppliers));
            localStorage.setItem('warehouse_erp_orders', JSON.stringify(orders));
        }
        
        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
        function loadData() {
            try {
                const savedProducts = localStorage.getItem('warehouse_erp_products');
                if (savedProducts) {
                    products = JSON.parse(savedProducts);
                }
                
                const savedSales = localStorage.getItem('warehouse_erp_sales');
                if (savedSales) {
                    sales = JSON.parse(savedSales);
                }
                
                const savedSuppliers = localStorage.getItem('warehouse_erp_suppliers');
                if (savedSuppliers) {
                    suppliers = JSON.parse(savedSuppliers);
                }
                
                const savedOrders = localStorage.getItem('warehouse_erp_orders');
                if (savedOrders) {
                    orders = JSON.parse(savedOrders);
                }
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
            }
        }
        
        // ä¿å­˜è®¾ç½®
        function saveSettings() {
            const settings = {
                theme: currentTheme,
                language: currentLanguage,
                sidebarCollapsed
            };
            localStorage.setItem('warehouse_erp_settings', JSON.stringify(settings));
        }
        
        // åŠ è½½è®¾ç½®
        function loadSettings() {
            try {
                const savedSettings = localStorage.getItem('warehouse_erp_settings');
                if (savedSettings) {
                    const settings = JSON.parse(savedSettings);
                    currentTheme = settings.theme || 'light';
                    currentLanguage = settings.language || 'zh-CN';
                    sidebarCollapsed = settings.sidebarCollapsed || false;
                    
                    // åº”ç”¨è®¾ç½®
                    document.documentElement.setAttribute('data-theme', currentTheme);
                    const themeToggle = document.getElementById('themeToggle');
                    if (themeToggle) {
                        themeToggle.textContent = currentTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
                    }
                }
            } catch (error) {
                console.error('åŠ è½½è®¾ç½®å¤±è´¥:', error);
            }
        }
        
        // æ¸…ç©ºæ‰€æœ‰æ•°æ®
        function clearAllData() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                localStorage.removeItem('warehouse_erp_products');
                localStorage.removeItem('warehouse_erp_sales');
                localStorage.removeItem('warehouse_erp_suppliers');
                localStorage.removeItem('warehouse_erp_orders');
                
                products = [];
                sales = [];
                suppliers = [];
                orders = [];
                
                updateDashboard();
                updateProductsTable();
                updateInventoryTable();
                
                showNotification('æ‰€æœ‰æ•°æ®å·²æ¸…ç©º', 'success');
            }
        }
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            // è‡ªåŠ¨éšè—
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
        
        // æ˜¾ç¤ºç”¨æˆ·èœå•
        function showUserMenu() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                logout();
            }
        }
        
        // é€€å‡ºç™»å½•
        function logout() {
            currentUser = null;
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            showNotification('å·²é€€å‡ºç™»å½•', 'info');
        }
        
        // å…¶ä»–åŠŸèƒ½å‡½æ•°ï¼ˆå ä½ç¬¦ï¼‰
        function showStockAdjustModal() {
            showNotification('åº“å­˜è°ƒæ•´åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }
        
        function showLowStockReport() {
            showNotification('åº“å­˜é¢„è­¦åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }
        
        function showAddSupplierModal() {
            showNotification('ä¾›åº”å•†ç®¡ç†åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }
        
        function showCreateOrderModal() {
            showNotification('é‡‡è´­è®¢å•åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }
        
        function showInventoryCheck() {
            showNotification('åº“å­˜ç›˜ç‚¹åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }
        
        function adjustStock(id) {
            showNotification('åº“å­˜è°ƒæ•´åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }
        
        function exportData() {
            exportAllData();
        }
        
        // é¡µé¢åŠ è½½å®Œæˆ
        window.addEventListener('load', function() {
            console.log('ğŸš€ æµ·å¤–ä»“ERPç³»ç»Ÿå¢å¼ºç‰ˆåŠ è½½å®Œæˆ');
            console.log('ğŸ“Š ç³»ç»ŸçŠ¶æ€: æ­£å¸¸è¿è¡Œ');
            console.log('ğŸŒ è®¿é—®åŸŸå:', window.location.hostname);
        });
    </script>
</body>
</html>